<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UK North-to-South: Business & Leisure Expedition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #f8fafc; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container { height: 350px; }
        }

        .fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .tab-active {
            border-bottom: 3px solid #0f172a;
            color: #0f172a;
            font-weight: 700;
        }
    </style>
    <!-- Chosen Palette: Slate & Indigo (Professional for business legs, clean for travel) -->
    <!-- Application Structure Plan:
         1. Header: Trip Overview (Dates, Direction, Key Constraints).
         2. Navigation: Tabs for "Daily Plan", "Vehicle & Logistics", "Trip Analytics".
         3. Itinerary View: Vertical day list with color-coded tags for "Work", "Drive", "Event".
         4. Logistics View: Dedicated section for the Car (4 Pax SUV), specific driving legs, and route advice.
         5. Analytics View: Visuals for driving fatigue management and activity balance.
    -->
    <!-- Visualization & Content Choices:
         - Route Map (Scatter): Visualizes the geographic drop from Highlands (North) to Cornwall (South) to London.
         - Driving Load (Bar): Critical for managing the long drives between Manchester/Bristol/Cornwall.
         - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->
</head>
<body class="bg-slate-50 text-slate-800 font-sans antialiased selection:bg-indigo-100 selection:text-indigo-900">

    <!-- Header -->
    <header class="bg-white sticky top-0 z-50 shadow-sm border-b border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center text-white font-bold text-xl">UK</div>
                    <div>
                        <h1 class="text-lg font-bold text-slate-900 leading-tight">North to South Expedition</h1>
                        <p class="text-xs text-slate-500">May 23 - June 8 ‚Ä¢ Scotland ‚ûî England</p>
                    </div>
                </div>
                
                <!-- Desktop Nav -->
                <nav class="hidden md:flex space-x-8">
                    <button onclick="switchTab('itinerary')" id="tab-itinerary" class="tab-active px-1 py-4 text-sm font-medium transition-colors hover:text-indigo-600">Daily Schedule</button>
                    <button onclick="switchTab('logistics')" id="tab-logistics" class="px-1 py-4 text-sm font-medium text-slate-500 transition-colors hover:text-indigo-600">Vehicle & Routes</button>
                    <button onclick="switchTab('analytics')" id="tab-analytics" class="px-1 py-4 text-sm font-medium text-slate-500 transition-colors hover:text-indigo-600">Analytics</button>
                </nav>

                <!-- Mobile Menu Button -->
                <button onclick="toggleMobileMenu()" class="md:hidden text-slate-500 hover:text-indigo-600">
                    <span class="text-2xl">‚ò∞</span>
                </button>
            </div>
        </div>
        
        <!-- Mobile Nav -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-slate-100">
            <div class="px-4 py-2 space-y-1">
                <button onclick="switchTab('itinerary')" class="block w-full text-left px-3 py-2 text-base font-medium text-slate-700 hover:bg-slate-50 rounded-md">Daily Schedule</button>
                <button onclick="switchTab('logistics')" class="block w-full text-left px-3 py-2 text-base font-medium text-slate-700 hover:bg-slate-50 rounded-md">Vehicle & Routes</button>
                <button onclick="switchTab('analytics')" class="block w-full text-left px-3 py-2 text-base font-medium text-slate-700 hover:bg-slate-50 rounded-md">Analytics</button>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <!-- Context Banner -->
        <div class="bg-indigo-50 border border-indigo-100 rounded-xl p-6 mb-8 flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
            <div>
                <h2 class="text-xl font-bold text-indigo-900">Trip Strategy: The "Business & Coast" Route</h2>
                <p class="text-indigo-700 text-sm mt-1">
                    Optimized to hit <strong>Manchester (Thu May 29)</strong> and <strong>Bristol (Fri May 30)</strong> on weekdays for office work, wrapping up with the <strong>Lords Cricket Match (Wed June 4)</strong>.
                </p>
            </div>
            <div class="flex flex-wrap gap-2">
                <span class="bg-white text-indigo-800 text-xs font-bold px-3 py-1.5 rounded-full border border-indigo-200 shadow-sm">4 Travelers</span>
                <span class="bg-white text-indigo-800 text-xs font-bold px-3 py-1.5 rounded-full border border-indigo-200 shadow-sm">SUV Required</span>
                <span class="bg-white text-indigo-800 text-xs font-bold px-3 py-1.5 rounded-full border border-indigo-200 shadow-sm">~2,100 km Drive</span>
            </div>
        </div>

        <!-- VIEW 1: ITINERARY -->
        <div id="itinerary-view" class="fade-in space-y-6">
            
            <!-- Controls -->
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold text-slate-800">Day-by-Day Plan</h3>
                <div class="text-xs text-slate-500 bg-white px-2 py-1 rounded border border-slate-200 shadow-sm">
                    Click cards for details
                </div>
            </div>

            <!-- List Container -->
            <div id="day-list" class="space-y-4">
                <!-- JS Populated -->
            </div>
        </div>

        <!-- VIEW 2: LOGISTICS -->
        <div id="logistics-view" class="hidden fade-in space-y-8">
            
            <!-- Vehicle Section -->
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                <div class="bg-slate-50 px-6 py-4 border-b border-slate-200">
                    <h3 class="text-lg font-bold text-slate-800">üöô Car Rental Strategy (4 Adults)</h3>
                </div>
                <div class="p-6 grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h4 class="font-bold text-slate-700 mb-2">Recommended Vehicle Class</h4>
                        <div class="p-4 bg-indigo-50 rounded-lg border border-indigo-100">
                            <div class="text-2xl font-bold text-indigo-900 mb-1">Standard/Full-Size SUV</div>
                            <p class="text-sm text-indigo-800">Examples: <em>Volvo XC60, Nissan X-Trail, Toyota RAV4, Kia Sorento</em></p>
                        </div>
                        <ul class="mt-4 space-y-2 text-sm text-slate-600">
                            <li class="flex items-start gap-2"><span class="text-green-500">‚úî</span> <strong>Boot Space:</strong> Critical for 4 suitcases. Do not book a "Compact" SUV.</li>
                            <li class="flex items-start gap-2"><span class="text-green-500">‚úî</span> <strong>Transmission:</strong> Automatic (Essential for relaxed driving).</li>
                            <li class="flex items-start gap-2"><span class="text-green-500">‚úî</span> <strong>Pick-up:</strong> Edinburgh Airport (May 25).</li>
                            <li class="flex items-start gap-2"><span class="text-green-500">‚úî</span> <strong>Drop-off:</strong> London Heathrow (June 2).</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-bold text-slate-700 mb-2">Driving Rules & Tips</h4>
                        <div class="space-y-3">
                            <div class="flex gap-3">
                                <div class="w-8 h-8 bg-slate-100 rounded-full flex items-center justify-center shrink-0">üá¨üáß</div>
                                <p class="text-sm text-slate-600"><strong>Keep Left:</strong> Driver sits on the right. Roundabouts go clockwise.</p>
                            </div>
                            <div class="flex gap-3">
                                <div class="w-8 h-8 bg-slate-100 rounded-full flex items-center justify-center shrink-0">üÖøÔ∏è</div>
                                <p class="text-sm text-slate-600"><strong>City Parking:</strong> In Manchester & Bristol, pre-book hotel parking. Street parking is scarce.</p>
                            </div>
                            <div class="flex gap-3">
                                <div class="w-8 h-8 bg-slate-100 rounded-full flex items-center justify-center shrink-0">‚õΩ</div>
                                <p class="text-sm text-slate-600"><strong>Fuel:</strong> "Petrol" (Green) or "Diesel" (Black). Check car cap carefully.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Route Table -->
            <div class="bg-white rounded-xl shadow-sm border border-slate-200">
                <div class="bg-slate-50 px-6 py-4 border-b border-slate-200">
                    <h3 class="text-lg font-bold text-slate-800">üõ£Ô∏è Major Transit Legs</h3>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full text-left text-sm text-slate-600">
                        <thead class="bg-slate-50 text-xs uppercase font-semibold text-slate-500">
                            <tr>
                                <th class="px-6 py-3">Route</th>
                                <th class="px-6 py-3">Dist (km)</th>
                                <th class="px-6 py-3">Time (Non-stop)</th>
                                <th class="px-6 py-3">Notes</th>
                            </tr>
                        </thead>
                        <tbody id="route-table-body" class="divide-y divide-slate-100">
                            <!-- JS populated -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- VIEW 3: ANALYTICS -->
        <div id="analytics-view" class="hidden fade-in space-y-8">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Driving Chart -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                    <h4 class="text-lg font-bold text-slate-800 mb-4">Daily Driving Load (km)</h4>
                    <div class="chart-container">
                        <canvas id="driveChart"></canvas>
                    </div>
                    <p class="text-xs text-slate-500 mt-2 text-center">Spikes indicate major travel days. Plan rest stops accordingly.</p>
                </div>

                <!-- Trip Mix -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                    <h4 class="text-lg font-bold text-slate-800 mb-4">Activity Balance</h4>
                    <div class="chart-container">
                        <canvas id="mixChart"></canvas>
                    </div>
                    <p class="text-xs text-slate-500 mt-2 text-center">Healthy mix of Nature, City, and Work commitments.</p>
                </div>

                <!-- Route Scatter -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 md:col-span-2">
                    <h4 class="text-lg font-bold text-slate-800 mb-4">Route Trajectory (North to South)</h4>
                    <div class="chart-container">
                        <canvas id="routeMap"></canvas>
                    </div>
                    <p class="text-xs text-slate-500 mt-2 text-center">Visualizing your journey from the Highlands down to Cornwall.</p>
                </div>
            </div>
        </div>

    </main>

    <!-- Modal for Day Details -->
    <div id="details-modal" class="fixed inset-0 bg-slate-900/50 backdrop-blur-sm hidden z-[60] flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[85vh] overflow-hidden flex flex-col transform transition-all scale-100">
            <div class="px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50">
                <h3 id="modal-title" class="text-xl font-bold text-slate-800">Day Details</h3>
                <button onclick="closeModal()" class="text-slate-400 hover:text-slate-600 text-2xl">&times;</button>
            </div>
            <div id="modal-content" class="p-6 overflow-y-auto space-y-4">
                <!-- Content -->
            </div>
            <div class="px-6 py-4 border-t border-slate-100 bg-slate-50 flex justify-end">
                <button onclick="closeModal()" class="px-4 py-2 bg-slate-800 text-white rounded-lg hover:bg-slate-700 text-sm font-medium">Close</button>
            </div>
        </div>
    </div>

    <script>
        // --- DATA ---
        const itinerary = [
            {
                day: 1, date: "Fri May 23", loc: "Edinburgh", type: "Travel/City",
                title: "Arrival in Scotland",
                desc: "Arrive Edinburgh Airport (EDI). Transfer to City Centre. Relax/Dinner.",
                km: 0, time: "0h",
                details: "Landing day. Do not rent car yet (save 2 days rental/parking). Take Tram to Princes Street. Walk the Royal Mile. Dinner at 'The Witchery' or 'Dishoom Edinburgh'.",
                stay: "Edinburgh City Centre"
            },
            {
                day: 2, date: "Sat May 24", loc: "Edinburgh", type: "City",
                title: "Edinburgh Exploration",
                desc: "Edinburgh Castle, Victoria St, Arthur's Seat.",
                km: 0, time: "0h",
                details: "Full day in the capital. Morning: Edinburgh Castle (Book slots!). Lunch: Grassmarket. Afternoon: Hike Arthur's Seat for views or visit National Museum of Scotland.",
                stay: "Edinburgh City Centre"
            },
            {
                day: 3, date: "Sun May 25", loc: "Aviemore", type: "Nature/Drive",
                title: "Into the Highlands",
                desc: "Pick up Car. Drive North to Cairngorms.",
                km: 200, time: "3h",
                details: "Pick up SUV from Edinburgh Airport. Drive M90/A9 North. Stop at Pitlochry (Dam/Salmon Ladder). Continue to Aviemore. Evening walk at Loch Morlich.",
                stay: "Aviemore or Inverness"
            },
            {
                day: 4, date: "Mon May 26", loc: "Skye", type: "Nature/Drive",
                title: "Loch Ness & Skye",
                desc: "Monster hunting & The Misty Isle.",
                km: 240, time: "3.5h",
                details: "Drive to Loch Ness (Urquhart Castle). Continue West on A87 via Eilean Donan Castle (Iconic photo stop). Cross Skye Bridge. Stay near Portree.",
                stay: "Isle of Skye (Portree)"
            },
            {
                day: 5, date: "Tue May 27", loc: "Glasgow", type: "Drive/Nature",
                title: "Glencoe to Glasgow",
                desc: "The 'Skyfall' Route. Dramatic scenery.",
                km: 340, time: "5h",
                details: "Early start. Drive South via Fort William. Drive through Glencoe (stops: Three Sisters). Drive along Loch Lomond. Arrive Glasgow evening.",
                stay: "Glasgow City"
            },
            {
                day: 6, date: "Wed May 28", loc: "Windermere", type: "Nature/Drive",
                title: "Glasgow to Lake District",
                desc: "Crossing the border into England.",
                km: 240, time: "3h",
                details: "Morning: Glasgow Cathedral/Necropolis. Drive M74 South. Enter Lake District. Afternoon: Bowness-on-Windermere, maybe a lake cruise.",
                stay: "Windermere/Ambleside"
            },
            {
                day: 7, date: "Thu May 29", loc: "Manchester", type: "Work/City",
                title: "Office Work (MCR)",
                desc: "Morning drive to Manchester. Half-day Office.",
                km: 130, time: "1.5h",
                details: "Drive M6 South to Manchester (1.5 hrs). **12:00 PM - 5:00 PM: Office Work.** Evening: Dinner in Spinningfields or Northern Quarter.",
                stay: "Manchester City Centre"
            },
            {
                day: 8, date: "Fri May 30", loc: "Bristol", type: "Work/Drive",
                title: "Office Work (Bristol)",
                desc: "Early drive to Bristol. Half-day Office.",
                km: 270, time: "3.5h",
                details: "**Start very early (6:00 AM)** to beat traffic. Drive M6/M5 South to Bristol. **12:00 PM - 5:00 PM: Office Work.** Evening: Clifton Suspension Bridge.",
                stay: "Bristol"
            },
            {
                day: 9, date: "Sat May 31", loc: "Cornwall", type: "Nature/Drive",
                title: "The Cornish Coast",
                desc: "Drive to St Ives. Coastal relaxation.",
                km: 300, time: "3.5h",
                details: "Weekend! Drive M5/A30 South-West into Cornwall. Head to St Ives. Beach time, Tate St Ives, or coastal hike. Fish & Chips dinner.",
                stay: "St Ives or Penzance"
            },
            {
                day: 10, date: "Sun June 1", loc: "Cornwall", type: "Nature",
                title: "St Michael's Mount",
                desc: "The island castle & beaches.",
                km: 30, time: "1h",
                details: "Visit St Michael's Mount (check tide times to walk the causeway). Afternoon: Minack Theatre (outdoor amphitheater) or Lands End.",
                stay: "St Ives or Penzance"
            },
            {
                day: 11, date: "Mon June 2", loc: "London", type: "Travel",
                title: "Return to London",
                desc: "Long drive back. Drop Rental Car.",
                km: 460, time: "5.5h",
                details: "Long transit day. Drive A30/M3 to London Heathrow. **Return Car.** Take Heathrow Express to Central London. Check in.",
                stay: "London (Kensington/Marylebone)"
            },
            {
                day: 12, date: "Tue June 3", loc: "London", type: "City",
                title: "London Leisure",
                desc: "Shopping & Pre-Match relax.",
                km: 0, time: "0h",
                details: "Oxford Street shopping, Covent Garden, or Hyde Park. Easy day before the match.",
                stay: "London"
            },
            {
                day: 13, date: "Wed June 4", loc: "London", type: "Sports",
                title: "üèè LORDS: ENG vs NZ",
                desc: "The Home of Cricket. Full Day.",
                km: 0, time: "0h",
                details: "Head to St John's Wood. **Event: England vs New Zealand Test Match.** Enjoy the atmosphere at Lord's.",
                stay: "London"
            },
            {
                day: 14, date: "Thu June 5", loc: "London", type: "City",
                title: "Historic London",
                desc: "Tower of London, The Shard.",
                km: 0, time: "0h",
                details: "Tower of London (Crown Jewels). Borough Market for lunch. The Shard view or Sky Garden.",
                stay: "London"
            },
            {
                day: 15, date: "Fri June 6", loc: "London", type: "Travel",
                title: "Departure",
                desc: "Fly home from LHR/LGW.",
                km: 0, time: "0h",
                details: "Last minute souvenirs. Train to airport. Fly out.",
                stay: "N/A"
            }
        ];

        // --- RENDER LOGIC ---

        function init() {
            renderItinerary();
            renderRouteTable();
            renderCharts();
        }

        function switchTab(tab) {
            ['itinerary', 'logistics', 'analytics'].forEach(t => {
                document.getElementById(`${t}-view`).classList.add('hidden');
                document.getElementById(`tab-${t}`).classList.remove('tab-active');
                document.getElementById(`tab-${t}`).classList.add('text-slate-500');
            });
            document.getElementById(`${tab}-view`).classList.remove('hidden');
            document.getElementById(`tab-${tab}`).classList.add('tab-active');
            document.getElementById(`tab-${tab}`).classList.remove('text-slate-500');
            document.getElementById('mobile-menu').classList.add('hidden');
        }

        function toggleMobileMenu() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        }

        function renderItinerary() {
            const container = document.getElementById('day-list');
            itinerary.forEach(item => {
                let badgeColor = "bg-slate-100 text-slate-700";
                if(item.type.includes("Work")) badgeColor = "bg-purple-100 text-purple-700 border-purple-200";
                if(item.type.includes("Nature")) badgeColor = "bg-emerald-100 text-emerald-700 border-emerald-200";
                if(item.type.includes("Sports")) badgeColor = "bg-orange-100 text-orange-700 border-orange-200";

                const card = document.createElement('div');
                card.className = "bg-white p-5 rounded-lg border border-slate-200 shadow-sm hover:shadow-md transition cursor-pointer flex flex-col md:flex-row gap-4 items-start md:items-center";
                card.onclick = () => openModal(item);
                
                card.innerHTML = `
                    <div class="flex-shrink-0 w-16 h-16 bg-slate-50 rounded-lg flex flex-col items-center justify-center border border-slate-100">
                        <span class="text-xs text-slate-500 font-bold uppercase">Day</span>
                        <span class="text-xl font-bold text-slate-800">${item.day}</span>
                    </div>
                    <div class="flex-grow">
                        <div class="flex flex-wrap gap-2 mb-1">
                            <span class="text-xs font-bold px-2 py-0.5 rounded border ${badgeColor}">${item.type}</span>
                            <span class="text-xs font-medium text-slate-400 flex items-center">üìÖ ${item.date}</span>
                            <span class="text-xs font-medium text-slate-400 flex items-center">üìç ${item.loc}</span>
                        </div>
                        <h4 class="text-lg font-bold text-slate-800">${item.title}</h4>
                        <p class="text-sm text-slate-600">${item.desc}</p>
                    </div>
                    <div class="flex-shrink-0 text-right min-w-[80px]">
                        ${item.km > 0 ? 
                            `<div class="text-sm font-bold text-slate-700">üöó ${item.km} km</div><div class="text-xs text-slate-500">${item.time} drive</div>` : 
                            `<div class="text-sm text-slate-400">No Driving</div>`
                        }
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function renderRouteTable() {
            const tbody = document.getElementById('route-table-body');
            const drives = itinerary.filter(i => i.km > 0);
            drives.forEach(d => {
                const tr = document.createElement('tr');
                tr.className = "hover:bg-slate-50 transition";
                tr.innerHTML = `
                    <td class="px-6 py-4 font-medium text-slate-900">${d.loc} Leg</td>
                    <td class="px-6 py-4">${d.km}</td>
                    <td class="px-6 py-4">${d.time}</td>
                    <td class="px-6 py-4 text-xs">${d.stay.split('(')[0]}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        function openModal(item) {
            document.getElementById('modal-title').textContent = `${item.title} (${item.date})`;
            document.getElementById('modal-content').innerHTML = `
                <div class="space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div class="p-3 bg-slate-50 rounded border border-slate-100">
                            <div class="text-xs text-slate-500 uppercase">Location</div>
                            <div class="font-medium text-slate-800">${item.loc}</div>
                        </div>
                        <div class="p-3 bg-slate-50 rounded border border-slate-100">
                            <div class="text-xs text-slate-500 uppercase">Driving</div>
                            <div class="font-medium text-slate-800">${item.km} km / ${item.time}</div>
                        </div>
                    </div>
                    <div>
                        <h5 class="font-bold text-slate-800 mb-2">Plan Details</h5>
                        <p class="text-slate-600 leading-relaxed">${item.details}</p>
                    </div>
                     <div>
                        <h5 class="font-bold text-slate-800 mb-2">Accommodation</h5>
                        <p class="text-slate-600">üè® ${item.stay}</p>
                    </div>
                </div>
            `;
            document.getElementById('details-modal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('details-modal').classList.add('hidden');
        }

        function renderCharts() {
            // 1. Driving Chart
            new Chart(document.getElementById('driveChart'), {
                type: 'bar',
                data: {
                    labels: itinerary.map(i => `D${i.day}`),
                    datasets: [{
                        label: 'Kilometers',
                        data: itinerary.map(i => i.km),
                        backgroundColor: itinerary.map(i => i.km > 300 ? '#ef4444' : (i.km > 100 ? '#6366f1' : '#cbd5e1')),
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { y: { beginAtZero: true } }
                }
            });

            // 2. Mix Chart
            const types = {};
            itinerary.forEach(i => {
                const t = i.type.split('/')[0];
                types[t] = (types[t] || 0) + 1;
            });
            new Chart(document.getElementById('mixChart'), {
                type: 'doughnut',
                data: {
                    labels: Object.keys(types),
                    datasets: [{
                        data: Object.values(types),
                        backgroundColor: ['#6366f1', '#10b981', '#f97316', '#64748b', '#a855f7'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: { legend: { position: 'right' } }
                }
            });

            // 3. Route Map (Scatter)
            // Simulating Latitude (Y) vs Day (X)
            // North (Scotland) ~ 10, South (Cornwall) ~ 1
            const latMap = { 
                "Edinburgh": 9, "Aviemore": 10, "Skye": 9.5, "Glasgow": 8, 
                "Windermere": 6, "Manchester": 5, "Bristol": 3, "Cornwall": 1, "London": 2 
            };
            const mapData = itinerary.map(i => ({ x: i.day, y: latMap[i.loc] || 2 }));
            
            new Chart(document.getElementById('routeMap'), {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Route Path',
                        data: mapData,
                        showLine: true,
                        borderColor: '#0f172a',
                        backgroundColor: '#6366f1',
                        pointRadius: 6,
                        tension: 0.3
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { display: true, title: {display: true, text: '‚Üê South | North ‚Üí'}, ticks: {display: false} },
                        x: { title: {display: true, text: 'Day of Trip'} }
                    }
                }
            });
        }

        window.onload = init;

    </script>
</body>
</html>
